{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2025-10-29 14:06:54.289950",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Salary Structure Assignment",
 "docstatus": 0,
 "doctype": "Print Format",
 "font_size": 14,
 "html": "<div style=\"font-family: Arial, sans-serif; font-size: 13px; margin: 20px;\">\n    <h3 style=\"text-align: center; text-decoration: underline; margin-bottom: 20px;\">CTC Details</h3>\n\n    <p>\n        <strong>Compensation Package of {{ doc.employee or \"\"}}: {{ doc.employee_name or \"\"}}</strong>\n    </p>\n\n    {% if doc.salary_structure %}\n        {% set ss = frappe.get_doc(\"Salary Structure\", doc.salary_structure) %}\n    {% else %}\n        {% set ss = None %}\n    {% endif %}\n\n    {% set ns = namespace(total_earning_monthly=0) %}\n    {% set cm = namespace(total_employer_contribution_monthly = 0) %}\n\n    <table style=\"width: 100%; border-collapse: collapse; font-size: 13px;\" border=\"1\" cellspacing=\"0\" cellpadding=\"6\">\n        <thead style=\"background-color: #f5f5f5; text-align: center;\">\n            <tr>\n                <th style=\"width: 5%;\">Sr</th>\n                <th style=\"width: 60%;\">Compensation Details</th>\n                <th style=\"width: 17%;\">Monthly Ceiling</th>\n                <th style=\"width: 18%;\">Annual Ceiling</th>\n            </tr>\n        </thead>\n\n        <tbody>\n            {% set letters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\" %}\n\n            {# --- Earnings Section --- #}\n            {% if doc.custom_calculated_earnings %}\n                {% for e in doc.custom_calculated_earnings %}\n                    {% set comp_doc = frappe.get_doc(\"Salary Component\", e.salary_component) %}\n                    {% set ns.total_earning_monthly = ns.total_earning_monthly + (e.amount or 0) %}\n                    <tr>\n                        <td style=\"text-align:center;\">{{ letters[loop.index0] if loop.index0 < letters|length else loop.index }}</td>\n                        <td>{{ comp_doc.custom_salary_component_type or comp_doc.name }}</td>\n                        <td style=\"text-align:right;\">{{ e.amount or 0 }}</td>\n                        <td style=\"text-align:right;\">{{((e.amount or 0) * 12)  | round(2) }}</td>\n                    </tr>\n                {% endfor %}\n            {% elif ss and ss.earnings %}\n                {% for e in ss.earnings %}\n                    {% set comp_doc = frappe.get_doc(\"Salary Component\", e.salary_component) %}\n                    {% set ns.total_earning_monthly = ns.total_earning_monthly + (e.amount or 0) %}\n                    <tr>\n                        <td style=\"text-align:center;\">{{ letters[loop.index0] if loop.index0 < letters|length else loop.index }}</td>\n                        <td>{{ comp_doc.custom_salary_component_type or comp_doc.name }}</td>\n                        <td style=\"text-align:right;\">{{ e.amount or 0 }}</td>\n                        <td style=\"text-align:right;\">{{ ((e.amount or 0) * 12) | round(2) }}</td>\n                    </tr>\n                {% endfor %}\n            {% else %}\n                <tr><td style=\"text-align:center;\">A</td><td>Basic Salary</td><td></td><td></td></tr>\n                <tr><td style=\"text-align:center;\">B</td><td>HRA</td><td></td><td></td></tr>\n                <tr><td style=\"text-align:center;\">C</td><td>CA</td><td></td><td></td></tr>\n                <tr><td style=\"text-align:center;\">D</td><td>Special Allowance</td><td></td><td></td></tr>\n                <tr><td style=\"text-align:center;\">E</td><td>Performance Incentive</td><td></td><td></td></tr>\n            {% endif %}\n\n            {# --- GROSS SALARY TOTAL --- #}\n            <tr style=\"font-weight: bold; background-color: #f2f2f2;\">\n                <td colspan=\"2\">Gross Salary</td>\n                <td style=\"text-align:right;\">{{ ns.total_earning_monthly | round(2) }}</td>\n                <td style=\"text-align:right;\">{{ (ns.total_earning_monthly * 12) | round(2) }}</td>\n            </tr>\n\n            <tr style=\"font-weight: bold; background-color: #f2f2f2;\">\n                <td colspan=\"4\">Welfare/ Other benefits</td>\n            </tr>\n\n            {# Static Welfare Items (you can enhance this dynamically later) #}\n            <tr><td style=\"text-align:center;\">{{ letters[ss.earnings|length] if ss and ss.earnings else 'F' }}</td><td>Mediclaim</td><td style=\"text-align:right;\">0</td><td style=\"text-align:right;\">0</td></tr>\n            <tr><td style=\"text-align:center;\">{{ letters[(ss.earnings|length + 1) if ss and ss.earnings else 6] }}</td><td>Vehicle Allowance</td><td style=\"text-align:right;\">0</td><td style=\"text-align:right;\">0</td></tr>\n            <tr><td style=\"text-align:center;\">{{ letters[(ss.earnings|length + 2) if ss and ss.earnings else 7] }}</td><td>Canteen Allowance</td><td style=\"text-align:right;\">0</td><td style=\"text-align:right;\">0</td></tr>\n\n            <tr style=\"font-weight: bold; background-color: #f2f2f2;\">\n                <td colspan=\"4\">Deferral/ Retiral</td>\n            </tr>\n\n            {# --- Employer Contribution Section --- #}\n            {% if doc.custom_calculated_employer_contribution %}\n                {% for c in doc.custom_calculated_employer_contribution %}\n                    {% set comp_doc = frappe.get_doc(\"Salary Component\", c.salary_component) %}\n                    {% set cm.total_employer_contribution_monthly = cm.total_employer_contribution_monthly + (c.amount or 0) %}\n                    {% set idx = (ss.earnings|length if ss and ss.earnings else 8) + 3 + loop.index0 %}\n                    <tr>\n                        <td style=\"text-align:center;\">{{ letters[idx] if idx < letters|length else idx }}</td>\n                        <td>{{ comp_doc.custom_salary_component_type or comp_doc.name }}</td>\n                        <td style=\"text-align:right;\">{{ c.amount or 0 }}</td>\n                        <td style=\"text-align:right;\">{{ ((c.amount or 0) * 12) | round(2) }}</td>\n                    </tr>\n                {% endfor %}\n            {% else %}\n                <tr><td style=\"text-align:center;\">I</td><td>ESIC Contribution</td><td></td><td></td></tr>\n                <tr><td style=\"text-align:center;\">J</td><td>EPF Contribution</td><td></td><td></td></tr>\n                <tr><td style=\"text-align:center;\">K</td><td>LWF Contribution</td><td></td><td></td></tr>\n                <tr><td style=\"text-align:center;\">L</td><td>Gratuity (As per Act)</td><td></td><td></td></tr>\n                <tr><td style=\"text-align:center;\">M</td><td>Bonus/ Ex-gratia (Annual)</td><td></td><td></td></tr>\n            {% endif %}\n\n            {# --- TOTAL COST TO COMPANY --- #}\n            {% set total_ctc_monthly = ns.total_earning_monthly + cm.total_employer_contribution_monthly %}\n            <tr style=\"font-weight: bold; background-color: #f2f2f2;\">\n                <td colspan=\"2\">Cost to Company (CTC)</td>\n                <td style=\"text-align:right;\">{{ total_ctc_monthly | round(2) }}</td>\n                <td style=\"text-align:right;\">{{ (total_ctc_monthly * 12) | round(2) }}</td>\n            </tr>\n        </tbody>\n    </table>\n\n    <br><br>\n    <p><strong>Notes</strong></p>\n    <ol style=\"margin-left: 20px; line-height: 1.6;\">\n        <li>All statutory deductions shall be deducted as per Law.</li>\n        <li>Taxes as applicable from time to time shall be borne by the Employee.</li>\n        <li>Confidential document: Content of this letter not to be disclosed to unrelated parties.</li>\n    </ol>\n\n    <br><br><br>\n\n    <div style=\"text-align: right; margin-top: 40px;\">\n        <p><strong>Auth Sign</strong><br>{{ doc.company or \"\"}}</p>\n    </div>\n\n    <br><br>\n    <p><strong>Accepted</strong></p>\n    <p><strong>{{ doc.employee_name or \"\"}}</strong></p>\n</div>\n",
 "idx": 0,
 "line_breaks": 0,
 "margin_bottom": 15.0,
 "margin_left": 15.0,
 "margin_right": 15.0,
 "margin_top": 15.0,
 "modified": "2025-10-31 12:43:22.337015",
 "modified_by": "Administrator",
 "module": "SMK HRMS",
 "name": "CTC Format",
 "owner": "Administrator",
 "page_number": "Hide",
 "pdf_generator": "wkhtmltopdf",
 "print_format_builder": 0,
 "print_format_builder_beta": 0,
 "print_format_for": "DocType",
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}