[
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-09-24 12:51:03.234991",
  "module": "SMK HRMS",
  "name": "Not allowed to Create/Update interview against 'Closed' Job Opening",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Interview",
  "script": "if doc.job_opening:\n    job_opening_doc = frappe.get_doc('Job Opening', doc.job_opening)\n    job_opening_link = frappe.utils.get_link_to_form('Job Opening', doc.job_opening)\n    if job_opening_doc.status == 'Closed':\n        frappe.throw(f'Can not create Interview against closed Job Opening: {job_opening_link}')\n       \n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-09-24 12:51:03.251105",
  "module": "SMK HRMS",
  "name": "Not allowed to Create/Update Job Offer against 'Closed' Job Opening",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Job Offer",
  "script": "if doc.custom_job_opening:\n    job_opening_doc = frappe.get_doc('Job Opening', doc.custom_job_opening)\n    job_opening_link = frappe.utils.get_link_to_form('Job Opening', doc.custom_job_opening)\n    if job_opening_doc.status == 'Closed':\n        frappe.throw(f'Can not create Job Offer against closed Job Opening: {job_opening_link}')\n       \n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Submit",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-09-24 12:51:03.265304",
  "module": "SMK HRMS",
  "name": "Update Hired vacancy in job opening is submitted",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Job Offer",
  "script": "if doc.status == 'Accepted':\n    opening = doc.custom_job_opening\n    \n    job_requisition = frappe.db.get_value('Job Opening', opening, 'job_requisition')\n    vacancy_field = 'vacancies' if job_requisition else 'planned_vacancies'\n    \n    vacancy = frappe.db.get_value('Job Opening', opening, vacancy_field)\n    staffing_plan = frappe.db.get_value('Job Opening', opening, 'staffing_plan')\n    \n    hired_vacancy = frappe.db.count('Job Offer', {'docstatus':1, 'status': 'Accepted', 'custom_job_opening': opening})\n        \n    frappe.db.set_value('Job Opening', opening, 'custom_hired_vacancy', hired_vacancy)\n        \n    if vacancy==hired_vacancy:\n            \n        # closing_date = frappe.utils.today()\n        frappe.db.set_value('Job Opening', opening, 'status', 'Closed')\n        frappe.db.set_value('Job Opening', opening, 'publish', 0)\n        \n    if job_requisition and vacancy==hired_vacancy:\n        frappe.db.set_value('Job Requisition', job_requisition, 'status', 'Filled')\n        ",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Cancel",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-09-24 12:51:03.279342",
  "module": "SMK HRMS",
  "name": "Update Hired vacancy in job opening is cancelled",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Job Offer",
  "script": "if doc.status=='Accepted':\n    opening = doc.custom_job_opening\n    job_requisition = frappe.db.get_value('Job Opening', opening, 'job_requisition')\n    vacancy = frappe.db.get_value('Job Opening', opening, 'custom_hired_vacancy')\n    plan = frappe.db.get_value('Job Opening', opening, 'staffing_plan')\n    \n    new_vacancy = int(vacancy)-1\n    \n    frappe.db.set_value('Job Opening', opening, 'custom_hired_vacancy', new_vacancy)\n    frappe.db.set_value('Job Opening', opening, 'status', 'Open')\n    frappe.db.set_value('Job Opening', opening, 'publish', 1)\n    \n    frappe.db.set_value('Job Applicant', doc.job_appliant, 'status', 'Open')\n    \n    if job_requisition:\n        frappe.db.set_value('Job Requisition', job_requisition, 'status', 'Open & Approved')\n    \n    \n    ",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": "get_documents",
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-09-24 12:51:03.220660",
  "module": "SMK HRMS",
  "name": "Get required documents data",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": null,
  "script": "docu_template = frappe.form_dict[\"docu_template\"]\ncomensations = frappe.db.get_all(\"Documents\", {'parent': docu_template}, ['idx', 'document_name'])\n\nfrappe.response[\"message\"] = comensations",
  "script_type": "API"
 },
 {
  "allow_guest": 0,
  "api_method": "get_question",
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Insert",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2024-09-24 12:51:03.191704",
  "module": "SMK HRMS",
  "name": "Get required question for job opening",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": null,
  "script": "que_template = frappe.form_dict[\"que_template\"]\nquestionnaire = frappe.db.get_all(\"Candidate Questionnaire\", {'parent': que_template}, ['idx', 'questionnaire'])\n\nfrappe.response[\"message\"] = questionnaire",
  "script_type": "API"
 }
]